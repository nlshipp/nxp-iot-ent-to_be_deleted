/*
 * Copyright 2022 NXP
 *
 * Redistribution and use in source and binary forms, with or without
 * modification, are permitted provided that the following conditions are met:
 *
 * * Redistributions of source code must retain the above copyright
 *   notice, this list of conditions and the following disclaimer.
 *
 * * Redistributions in binary form must reproduce the above copyright
 *   notice, this list of conditions and the following disclaimer in the
 *   documentation and/or other materials provided with the distribution.
 * * Neither the name of the copyright holder nor the
 *   names of its contributors may be used to endorse or promote products
 *   derived from this software without specific prior written permission.
 *
 * THIS SOFTWARE IS PROVIDED BY THE COPYRIGHT HOLDERS AND CONTRIBUTORS "AS IS" AND
 * ANY EXPRESS OR IMPLIED WARRANTIES, INCLUDING, BUT NOT LIMITED TO, THE IMPLIED
 * WARRANTIES OF MERCHANTABILITY AND FITNESS FOR A PARTICULAR PURPOSE ARE
 * DISCLAIMED. IN NO EVENT SHALL THE COPYRIGHT HOLDER OR CONTRIBUTORS BE LIABLE
 * FOR ANY DIRECT, INDIRECT, INCIDENTAL, SPECIAL, EXEMPLARY, OR CONSEQUENTIAL DAMAGES
 * (INCLUDING, BUT NOT LIMITED TO, PROCUREMENT OF SUBSTITUTE GOODS OR SERVICES;
 * LOSS OF USE, DATA, OR PROFITS; OR BUSINESS INTERRUPTION) HOWEVER CAUSED AND
 * ON ANY THEORY OF LIABILITY, WHETHER IN CONTRACT, STRICT LIABILITY, OR TORT
 * (INCLUDING NEGLIGENCE OR OTHERWISE) ARISING IN ANY WAY OUT OF THE USE OF THIS
 * SOFTWARE, EVEN IF ADVISED OF THE POSSIBILITY OF SUCH DAMAGE.
 *
 */
//Abstract:
//
//      This module contains the constant definitions for the gyroscope
//      register interface and default property values.

#pragma once

#include "WTypesbase.h"

//Register interface
#define FXAS21002_STATUS						0x00
#define FXAS21002_OUT_X_MSB						0x01
#define FXAS21002_OUT_X_LSB						0x02
#define FXAS21002_OUT_Y_MSB						0x03
#define FXAS21002_OUT_Y_LSB						0x04
#define FXAS21002_OUT_Z_MSB						0x05
#define FXAS21002_OUT_Z_LSB						0x06
#define FXAS21002_DR_STATUS						0x07
#define FXAS21002_F_STATUS						0x08
#define FXAS21002_F_SETUP						0x09
#define FXAS21002_F_EVENT						0x0A
#define FXAS21002_INT_SRC_FLAG					0x0B
#define FXAS21002_WHO_AM_I						0x0C
#define FXAS21002_CTRL_REG0						0x0D
#define FXAS21002_RT_CFG						0x0E
#define FXAS21002_RT_SRC						0x0F
#define FXAS21002_RT_THS						0x10
#define FXAS21002_RT_COUNT						0x11
#define FXAS21002_TEMP							0x12
#define FXAS21002_CTRL_REG1						0x13
#define FXAS21002_CTRL_REG2						0x14
#define FXAS21002_CTRL_REG3						0x15

//Size of output data in bytes - OUT_[X/Y/Z]_[LSB/MSB], 6 bytes
#define FXAS21002_DATA_SIZE_BYTES      6

//DR_STATUS register
#define FXAS21002_DR_STATUS_XDR_MASK			0x01
#define FXAS21002_DR_STATUS_XDR_SHIFT			   0
#define FXAS21002_DR_STATUS_YDR_MASK			0x02
#define FXAS21002_DR_STATUS_YDR_SHIFT			   1
#define FXAS21002_DR_STATUS_ZDR_MASK			0x04
#define FXAS21002_DR_STATUS_ZDR_SHIFT			   2
#define FXAS21002_DR_STATUS_ZYXDR_MASK			0x08
#define FXAS21002_DR_STATUS_ZYXDR_SHIFT			   3
#define FXAS21002_DR_STATUS_XOW_MASK			0x10
#define FXAS21002_DR_STATUS_XOW_SHIFT			   4
#define FXAS21002_DR_STATUS_YOW_MASK			0x20
#define FXAS21002_DR_STATUS_YOW_SHIFT			   5
#define FXAS21002_DR_STATUS_ZOW_MASK			0x40
#define FXAS21002_DR_STATUS_ZOW_SHIFT			   6
#define FXAS21002_DR_STATUS_ZYXOW_MASK			0x80
#define FXAS21002_DR_STATUS_ZYXOW_SHIFT			   7

//F_STATUS register
#define FXAS21002_F_STATUS_F_CNT_MASK			0x3F
#define FXAS21002_F_STATUS_F_CNT_SHIFT			   0
#define FXAS21002_F_STATUS_F_WMKF_MASK			0x40
#define FXAS21002_F_STATUS_F_WMKF_SHIFT			   6
#define FXAS21002_F_STATUS_F_OVF_MASK			0x80
#define FXAS21002_F_STATUS_F_OVF_SHIFT			   7

//F_SETUP register
#define FXAS21002_F_SETUP_F_WMRK_MASK   0		x3F
#define FXAS21002_F_SETUP_F_WMRK_SHIFT			  0
#define FXAS21002_F_SETUP_F_MODE_MASK   0		xC0
#define FXAS21002_F_SETUP_F_MODE_SHIFT			  6

//F_EVENT register
#define FXAS21002_F_EVENT_FE_TIME_MASK			0x1F
#define FXAS21002_F_EVENT_FE_TIME_SHIFT			   0
#define FXAS21002_F_EVENT_F_EVENT_MASK			0x20
#define FXAS21002_F_EVENT_F_EVENT_SHIFT			   5

//INT_SRC_FLAG register
#define FXAS21002_INT_SRC_FLAG_SRC_DRDY_MASK	0x01
#define FXAS21002_INT_SRC_FLAG_SRC_DRDY_SHIFT	   0
#define FXAS21002_INT_SRC_FLAG_SRC_RT_MASK		0x02
#define FXAS21002_INT_SRC_FLAG_SRC_RT_SHIFT		   1
#define FXAS21002_INT_SRC_FLAG_SRC_FIFO_MASK	0x04
#define FXAS21002_INT_SRC_FLAG_SRC_FIFO_SHIFT	   2
#define FXAS21002_INT_SRC_FLAG_BOOTEND_MASK		0x08
#define FXAS21002_INT_SRC_FLAG_BOOTEND_SHIFT	   3

//WHO_AM_I register
#define FXAS21002_WHO_AM_I_WHOAMI_MASK			0xFF
#define FXAS21002_WHO_AM_I_WHOAMI_SHIFT			   0

//CTRL_REG0 register
#define FXAS21002_CTRL_REG0_FS_MASK				0x03
#define FXAS21002_CTRL_REG0_FS_SHIFT			   0
#define FXAS21002_CTRL_REG0_HPF_EN_MASK			0x04
#define FXAS21002_CTRL_REG0_HPF_EN_SHIFT		   2
#define FXAS21002_CTRL_REG0_SEL_MASK			0x18
#define FXAS21002_CTRL_REG0_SEL_SHIFT			   3
#define FXAS21002_CTRL_REG0_SPIW_MASK			0x20
#define FXAS21002_CTRL_REG0_SPIW_SHIFT			   5
#define FXAS21002_CTRL_REG0_BW_MASK				0xC0
#define FXAS21002_CTRL_REG0_BW_SHIFT			   6

//RT_CFG register
#define FXAS21002_RT_CFG_XTEFE_MASK				0x01
#define FXAS21002_RT_CFG_XTEFE_SHIFT			   0
#define FXAS21002_RT_CFG_YTEFE_MASK				0x02
#define FXAS21002_RT_CFG_YTEFE_SHIFT			   1
#define FXAS21002_RT_CFG_ZTEFE_MASK				0x04
#define FXAS21002_RT_CFG_ZTEFE_SHIFT			   2
#define FXAS21002_RT_CFG_ELE_MASK				0x08
#define FXAS21002_RT_CFG_ELE_SHIFT				   3

//RT_SRC register
#define FXAS21002_RT_SRC_X_RT_POL_MASK			0x01
#define FXAS21002_RT_SRC_X_RT_POL_SHIFT			   0
#define FXAS21002_RT_SRC_XRT_MASK				0x02
#define FXAS21002_RT_SRC_XRT_SHIFT				   1
#define FXAS21002_RT_SRC_Y_RT_POL_MASK			0x04
#define FXAS21002_RT_SRC_Y_RT_POL_SHIFT			   2
#define FXAS21002_RT_SRC_YRT_MASK				0x08
#define FXAS21002_RT_SRC_YRT_SHIFT				   3
#define FXAS21002_RT_SRC_Z_RT_POL_MASK			0x10
#define FXAS21002_RT_SRC_Z_RT_POL_SHIFT			   4
#define FXAS21002_RT_SRC_ZRT_MASK				0x20
#define FXAS21002_RT_SRC_ZRT_SHIFT				   5
#define FXAS21002_RT_SRC_EA_MASK				0x40
#define FXAS21002_RT_SRC_EA_SHIFT				   6

//RT_THS register
#define FXAS21002_RT_THS_THS_MASK				0x7F
#define FXAS21002_RT_THS_THS_SHIFT				   0
#define FXAS21002_RT_THS_DBCNTM_MASK			0x80
#define FXAS21002_RT_THS_DBCNTM_SHIFT			   7

//CTRL_REG1 register
#define FXAS21002_CTRL_REG1_MODE_MASK			0x03
#define FXAS21002_CTRL_REG1_MODE_SHIFT			   0
#define FXAS21002_CTRL_REG1_DR_MASK				0x1C
#define FXAS21002_CTRL_REG1_DR_SHIFT			   2
#define FXAS21002_CTRL_REG1_ST_MASK				0x20
#define FXAS21002_CTRL_REG1_ST_SHIFT			   5
#define FXAS21002_CTRL_REG1_RST_MASK			0x40
#define FXAS21002_CTRL_REG1_RST_SHIFT			   6
#define FXAS21002_CTRL_REG1_MODE_ACTIVE         0x02

//CTRL_REG2 register
#define FXAS21002_CTRL_REG2_PP_OD_MASK          0x01
#define FXAS21002_CTRL_REG2_PP_OD_SHIFT            0
#define FXAS21002_CTRL_REG2_IPOL_MASK           0x02
#define FXAS21002_CTRL_REG2_IPOL_SHIFT             1
#define FXAS21002_CTRL_REG2_INT_EN_DRDY_MASK    0x04
#define FXAS21002_CTRL_REG2_INT_EN_DRDY_SHIFT      2
#define FXAS21002_CTRL_REG2_INT_CFG_DRDY_MASK   0x08
#define FXAS21002_CTRL_REG2_INT_CFG_DRDY_SHIFT     3
#define FXAS21002_CTRL_REG2_INT_EN_RT_MASK      0x10
#define FXAS21002_CTRL_REG2_INT_EN_RT_SHIFT        4
#define FXAS21002_CTRL_REG2_INT_CFG_RT_MASK     0x20
#define FXAS21002_CTRL_REG2_INT_CFG_RT_SHIFT       5
#define FXAS21002_CTRL_REG2_INT_EN_FIFO_MASK    0x40
#define FXAS21002_CTRL_REG2_INT_EN_FIFO_SHIFT      6
#define FXAS21002_CTRL_REG2_INT_CFG_FIFO_MASK   0x80
#define FXAS21002_CTRL_REG2_INT_CFG_FIFO_SHIFT     7

#define FXAS21002_THRESH_ACT                      0x16

// Default property values
typedef struct _DATA_RATE
{
    ULONG  DataRateInterval;
    BYTE   RateCode;
} DATA_RATE, * PDATA_RATE;

const unsigned short SENSOR_GYROSCOPE_NAME[] = L"Gyroscope Sensor FXAS21002";
const unsigned short SENSOR_GYROSCOPE_DESCRIPTION[] = L"Gyroscope Sensor";
const unsigned short SENSOR_GYROSCOPE_ID[] = L"FXAS21002";
const unsigned short SENSOR_GYROSCOPE_MANUFACTURER[] = L"NXP";
const unsigned short SENSOR_FXAS21002_MODEL[] = L"FXAS21002";

const DOUBLE GYROSCOPE_CHANGE_SENSITIVITY_RESOLUTION = 0.0625;
const DOUBLE GYROSCOPE_MIN_CHANGE_SENSITIVITY = 0.0625;
const DOUBLE GYROSCOPE_MAX_CHANGE_SENSITIVITY = 4000;
const DOUBLE GYROSCOPE_DEFAULT_AXIS_THRESHOLD = 0.1f;
const DOUBLE DEFAULT_GYROSCOPE_CHANGE_SENSITIVITY = 0.0625;
const DOUBLE CHANGE_SENSITIVITY_NOT_SET = -1.0;

const ULONG GYROSCOPE_MIN_REPORT_INTERVAL = 1;
const ULONG DEFAULT_GYROSCOPE_REPORT_INTERVAL = 80;
const ULONG CURRENT_REPORT_INTERVAL_NOT_SET = 0;
const DATA_RATE GYROSCOPE_SUPPORTED_DATA_RATES[] = { { 80, 0x06 }, { 40, 0x05 }, { 20, 0x04 }, { 10, 0x03 }, { 5, 0x02 }, {2, 0x01 }, {1, 0x00} };
const ULONG GYROSCOPE_SUPPORTED_DATA_RATES_COUNT = ARRAYSIZE(GYROSCOPE_SUPPORTED_DATA_RATES);

