Known Issues/Limitations
====

Read through all hardware-related reference material and ensure that you have made all the necessary hardware modifications before using the software.

The imx-windows-bsp reference BSP has the following limitations:
 - SD/eMMC is the only supported boot media


Table: Common known issues and workarounds for i.MX Family SoC

| SoC      | Module     | Source   | Description      | Workaround       |
|:---------|:-----------|:---------|:-----------------|:-----------------|
| All SoC  | Boot             | Software | In case multiple SD cards marked as bootable are inserted before power on target might fail to boot.                                                                                          | It is recommended to newly format the SD card using Diskpart.       |
| All SoC  | UEFI             | Software | USB is not supported in UEFI.                                                                                                                                                                 | Use on board serial port and console application in order to access UEFI menu. |
| All SoC  | USB              | Software | Only USB HOST mode is supported.                                                                                                                                                              | No workaround                                                       |
| All SoC  | VS2017 build     | Software | Build of iMXPlatform.sln fails if there are spaces in project path.                                                                                                                           | Place the imx-windows-iot directory in way its path doesn't contain spaces. |
| All SoC  | WSL build        | Software | On older versions of Windows the OP-TEE Trusted OS build might fail inside WSL environment if the BSP is located in Windows file system.                                                      | Move sources to WSL root drive (eg. $HOME).                         |
| All SoC  | HAL Drivers      | Software | The HAL Extensions must be signed be certificates provided by Microsoft. Unfortunately required cerificates that are included in WDK 1809 have expired.                                       | Download the Microsoft Kits Package from Collaborate and use the “Windows OEM HAL Extension Test Cert 2017 (TEST ONLY)” and “Windows OEM Intermediate 2017 (TEST ONLY)” found in the EWDK.iso file or contact Microsoft for help. |
| All SoC  | Drivers          | Software | The sdport.sys in the recommended Windows build 19044.1288.211006-0501.21h2_release could cause the blue bug check screen. This could be observed when encrypting volumes with Bitlocker or using Cfimager. | Patch the operating system with newer sport.sys included in bsp. When deploying bsp use `/patch_sdport` option as described in [Install Windows IOT Enterprise to eMMC]{#deploy-os-winpe} chapter. Please note that this driver is test signed and will cause blue screen in case of testsigning is disabled (`/test_signing` is not used). If testsigning is disabled do not use `/patch_sdport` and install KB5014023. |
| All SoC  | SDHC             | Software | The imxusdhc.sys in crashdump mode doesn’t read HW specific settings from ACPI so that these values are hardcoded in the SdhcSlotInitialize() method.                                         | Keep these values synchronized with values in Dsdt-Sdhc.asl ACPI table. |
| All SoC  | TPM/BitLocker    | Software | Windows does not start if BitLocker encrypted system drive (eMMC). There is failure on "Microsoft Windows Trusted Runtime Secure Service".                                                    | Patch firmware according to the following three steps. First apply patch: 'cd mu_platform_nxp/MU_BASECORE/ && git apply ../../patches/patch-mu_platform_nxp-MU_BASECORE.diff && cd ../../'. Second build firmware: './buildme64.sh -b 8M -t all -c -fw -t secured_uefi', change '8M' for another SoC. See Building ARM64 Firmware chapter in User's Guide for more details. Third deploy the firmware, see Deploy boot firmware chapter in User's Guide. |
| All SoC  | signed_firmware  | Software | Built signed_firmware.bin does not verify the FIT image signed.                                                                                                                            | Add CONFIG_IMX_HAB=y and CONFIG_FIT_SIGNATURE=y into uboot-imx/configs/imx8mq_evk_nt_uuu_defconfig for i.MX8MQ or imx8mm_evk_nt_uuu_defconfig for i.MX8MM and build signed_firmware.bin using command ./buildme64.sh -b 8M -t all -fw -t secured_uefi -t sign_images for i.MX8MQ, use -b 8Mm for i.MX8MM. See Enabling Secure Boot chapter in User's Guide. |
| i.MX 8MQ | Power management | Software | Device is unable to enter sleep and then wakeup. Device that is left unattended for longer period of time might hang.                                                                         | Disable sleep.                                                      |
| i.MX 8MQ | UART             | Software | The RTS-CTS hardware flow control is not available.                                                                                                                                           | No workaround                                                       |
| i.MX 8MQ | Display          | Software | Display driver supports 1280 x 720 60 Hz resolution only.                                                                                                                                     | No workaround                                                       |
| i.MX 8MQ | Display          | Software | The driver only supports HDMI monitor.                                                                                                                                                        | No workaround                                                       |
| i.MX 8MQ | Display          | Software | Monitor power-off is emulated by displaying a blank image.                                                                                                                                    | No workaround                                                       |
| i.MX 8MQ | GPU              | Software | The driver doesn’t support D3D9, so WPF (Windows Present Foundation) will not be accelerated.                                                                                                 | No workaround                                                       |
| i.MX 8MM | Power management | Software | Device is unable to enter sleep and then wakeup. Device that is left unattended for longer period of time might hang.                                                                         | Disable sleep.                                                      |
| i.MX 8MM | Power management | Software | Thermal management is not supported.                                                                                                                                                          | No workaround                                                       |
| i.MX 8MM | UART             | Software | The RTS-CTS hardware flow control is not available.                                                                                                                                           | No workaround                                                       |
| i.MX 8MM | Display          | Software | Display driver supports 1920 x 1080 60 Hz resolution only.                                                                                                                                    | No workaround                                                       |
| i.MX 8MM | Display          | Software | The driver only supports HDMI monitor.                                                                                                                                                        | No workaround                                                       |
| i.MX 8MM | Display          | Software | Display driver supports 1280 x 720 60 Hz resolution only.                                                                                                                                     | No workaround                                                       |
| i.MX 8MM | Display          | Software | Monitor power-off is emulated by displaying a blank image.                                                                                                                                    | No workaround                                                       |
